/* Collapsed Sidebar Background */
@media (-moz-pref("browser.tabs.allow_transparent_browser")){
    @media (-moz-pref("zen.view.compact.hide-tabbar")) {
        :root:not([zen-sidebar-expanded="true"]) body:has([zen-compact-mode="true"]) #browser::after {
            position: absolute !important;
            z-index: 0 !important;
            content: "" !important;
            opacity: 0;
            background-color: light-dark(rgba(200, 200, 200, 1), rgba(20, 20, 20, 1)) !important;

            max-width: 67px !important;
            min-width: 67px !important;
            @media not (-moz-pref("zen.view.compact.hide-toolbar")) {
                align-self: center !important;
                top: auto !important;
                margin-top: calc(var(--zen-element-separation) * 6.712) !important;
                margin-bottom: calc(var(--zen-element-separation) * 1.5) !important;
                height: calc(100% - (var(--zen-element-separation) * 7.3)) !important;
            }
            @media (-moz-pref("zen.view.compact.hide-toolbar")) {
                margin-top: calc(var(--zen-element-separation) * 1) !important;
                margin-bottom: calc(var(--zen-element-separation) * 1.2) !important;
                height: calc(100% - (var(--zen-element-separation) * 2.0)) !important;
                top: auto !important;
                bottom: auto !important;
            }

            border-radius: calc(var(--Neo-Border-Radius) + 2px) !important;

            visibility: visible !important;
            transition: opacity 0.1s ease;
        }
        

        /* Show pseudo background when active/hovered */
        :root:not([zen-right-side="true"]):not([zen-sidebar-expanded="true"]) {
            body:has([zen-compact-mode="true"] [zen-user-show=""], [zen-compact-mode="true"] #navigator-toolbox[zen-has-hover="true"]) #browser::after {
                opacity: 1;

                left: calc(var(--zen-element-separation) / 1) !important;
                right: auto !important;
            }
        }

        :root:not([zen-right-side="true"]):not([zen-sidebar-expanded="true"]) {
            body:has([zen-compact-mode="true"] [zen-user-show=""], [zen-compact-mode="true"] #navigator-toolbox:not([zen-has-hover="true"])) #browser::after {
                opacity: 0 !important;
                left: calc(var(--zen-element-separation) / 1) !important;
                right: auto !important;
            }
        }

        :root[zen-right-side="true"]:not([zen-sidebar-expanded="true"]) {
            body:has([zen-compact-mode="true"] [zen-user-show=""], [zen-compact-mode="true"] #navigator-toolbox[zen-has-hover="true"]) #browser::after {
                opacity: 1;

                left: auto !important;
                right: calc(var(--zen-element-separation) / 0.999) !important;
            }
        }

        :root[zen-right-side="true"]:not([zen-sidebar-expanded="true"]) {
            body:has([zen-compact-mode="true"] [zen-user-show=""], [zen-compact-mode="true"] #navigator-toolbox:not([zen-has-hover="true"])) #browser::after {
                opacity: 0;
                
                left: auto !important;
                right: calc(var(--zen-element-separation) / 0.999) !important;
            }
        }
    }
}